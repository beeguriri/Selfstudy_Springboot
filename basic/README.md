# ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê¸°ë³¸í¸
- ìŠ¤í”„ë§ì—†ì´ ìë°”ë¡œ ê°œë°œ í›„ ìŠ¤í”„ë§ìœ¼ë¡œ ë³€ê²½

## í”„ë¡œì íŠ¸ ìƒì„±í•˜ê¸°
- 'https://start.spring.io/' ì—ì„œ í”„ë¡œì íŠ¸ ìƒì„±
  - SpringBoot `2.7.12`
  - Gradle Groovy `7.6.1`
  - java `17`
  - Dependencies
    - `lombok`
      - `File>Settings>Plugins`ì—ì„œ `lombok` ì„¤ì¹˜
      - `File>Settings>Build, Execution, Deployment>Compiler>Annotation Processors`ì—ì„œ `Enable` ì²´í¬
    - `Spring Web`
- IDE : IntelliJ
  - Settings > Build,Execution,Deployment > Build Tools > Gradle > Build and Run => `IntelliJ IDEA`
- DB : ...

## í…ŒìŠ¤íŠ¸
- í•´ë‹¹ í´ë˜ìŠ¤ì—ì„œ test ìƒì„± : `Ctrl + Shift + t`
```java
import org.assertj.core.api.Assertions;
...
Assertions.assertThat(discount).isEqualTo(1000);
```

## í• ì¸ì •ì±… ì ìš©
- ì—­í• ê³¼ êµ¬í˜„ì„ ë¶„ë¦¬í–ˆìœ¼ë‚˜ 
  - DiscountPolicy Interface
  - FixDiscountPolicy, RateDiscountPolicy class
- `OrderServiceImpl`ì€ ì¶”ìƒì—ë„ ì˜ì¡´í•˜ê³  êµ¬ì²´ì—ë„ ì˜ì¡´í•¨
  - DIP ìœ„ë°˜
- í• ì¸ì •ì±…ì„ ë³€ê²½í•˜ë ¤ë©´ `OrderServiceImpl` ìˆ˜ì •í•´ì•¼ í•˜ë¯€ë¡œ
  - OCP ìœ„ë°˜
```java
// ê¸°ì¡´ (OrderServiceImpl)
// private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
   private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
```
### ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì„¤ê³„ ë³€ê²½ (ê´€ì‹¬ì‚¬ ë¶„ë¦¬)
```java
// ë³€ê²½ (OrderServiceImpl)
// ì¶”ìƒí™”ì—ë§Œ ì˜ì¡´í•˜ê³ , ë³€ê²½ì— ë‹«í˜€ìˆìŒ
private DiscountPolicy discountPolicy;
```
- `AppConfig` : ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ ë™ì‘ ë°©ì‹ì„ êµ¬ì„±í•˜ê¸° ìœ„í•´ `êµ¬í˜„ê°ì²´ë¥¼ ìƒì„±`í•˜ê³  `ì—°ê²°`í•˜ëŠ” ì±…ì„ì„ ê°€ì§€ëŠ” ë³„ë„ì˜ ì„¤ì • í´ë˜ìŠ¤ ë§Œë“¦
- IoC ì»¨í…Œì´ë„ˆ ë˜ëŠ” `DI ì»¨í…Œì´ë„ˆ`ë¼ê³ ë„ í•¨
- `êµ¬í˜„ê°ì²´ë¥¼ ìƒì„±`í•˜ê³  
```java
public OrderService orderService() {
    return new OrderServiceImpl(new MemoryMemberRepository(),
                                    new FixDiscountPolicy());
}
```
- `ì—°ê²°` : ìƒì„±ìë¥¼ í†µí•´ ì£¼ì…
```java
public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
    this.memberRepository = memberRepository;
    this.discountPolicy = discountPolicy;
}
```
- ì„¤ê³„ë³€ê²½ìœ¼ë¡œ `OrderServiceImpl`ì€ DiscountPolicy ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•œë‹¤
- `OrderServiceImpl` ì˜ ìƒì„±ìë¥¼ í†µí•´ì„œ ì–´ë–¤ êµ¬í˜„ ê°ì²´ì„ ì£¼ì…í• ì§€ëŠ” ì˜¤ì§ ì™¸ë¶€(`AppConfig`)ì—ì„œ ê²°ì •í•œë‹¤.
- `OrderServiceImpl` ì€ ì´ì œë¶€í„° ì‹¤í–‰ì—ë§Œ ì§‘ì¤‘í•˜ë©´ ëœë‹¤.
- `OrderServiceImpl` ì—ëŠ” `MemoryMemberRepository`, `FixDiscountPolicy` ê°ì²´ì˜ `ì˜ì¡´ê´€ê³„ê°€ ì£¼ì…`ëœë‹¤.


## ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ìŠ¤í”„ë§ ë¹ˆ
- `ApplicationContext`ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ê³  í•œë‹¤.
- `BeanFactory` : ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ìµœìƒìœ„ ì¸í„°í˜ì´ìŠ¤
- ìŠ¤í”„ë§ì»¨í…Œì´ë„ˆëŠ” `@Configuration`ì´ ë¶™ì€ `AppConfig`ë¥¼ ì„¤ì •(êµ¬ì„±) ì •ë³´ë¡œ ì‚¬ìš©í•œë‹¤.
- ì—¬ê¸°ì„œ `@Bean`ì´ ì íŒ ë©”ì„œë“œë¥¼ ëª¨ë‘ í˜¸ì¶œí•´ì„œ ë°˜í™˜ ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡í•œë‹¤.
- ìŠ¤í”„ë§ë¹ˆì€ `@Bean`ì´ ë¶™ì€ ë©”ì„œë“œ ëª…ì„ ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤. ë¹ˆ ì´ë¦„ì€ í•­ìƒ ë‹¤ë¥¸ ì´ë¦„ì„ ë¶€ì—¬!!
- ì‚¬ìš©í• ë•ŒëŠ” applicationContext.getBean() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì„œ ì°¾ì„ ìˆ˜ ìˆë‹¤.

### ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒí•˜ê¸°
- ìƒì†ê´€ê³„ : ë¶€ëª¨íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•˜ë©´ ëª¨ë“  ìì‹íƒ€ì… ì¡°íšŒ 
  - Object íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•˜ë©´, ëª¨ë“  ìŠ¤í”„ë§ ë¹ˆì„ ì¡°íšŒí•œë‹¤.

### ApplicationContext
- ë¹ˆ ê´€ë¦¬ ê¸°ëŠ¥
  - `BeanFactory` ìƒì†ë°›ì•„ì„œ ì œê³µ
- ë¶€ê°€ê¸°ëŠ¥
  - `MessageSource` í™œìš©í•œ êµ­ì œí™” ê¸°ëŠ¥
  - `EnvironmentCapable` í™˜ê²½ë³€ìˆ˜
  - `ApllicationEventPublisher` ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë²¤íŠ¸
  - `ResourceLoader` í¸ë¦¬í•œ ë¦¬ì†ŒìŠ¤ ì¡°íšŒ

## ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ
### ì‹±ê¸€í†¤ íŒ¨í„´
- ë©”ëª¨ë¦¬ ë‚­ë¹„ë¥¼ ì¤„ì´ê¸° ìœ„í•˜ì—¬ í•´ë‹¹ ê°ì²´ëŠ” 1ê°œë§Œ ìƒì„±ë˜ê³  ê³µìœ í•˜ë„ë¡ ì„¤ê³„ í•œë‹¤
- ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ 2ê°œ ì´ìƒ ìƒì„±í•˜ì§€ ëª»í•˜ë„ë¡
  - private ìƒì„±ìë¥¼ ì‚¬ìš©í•´ì„œ ì™¸ë¶€ì—ì„œ ì„ì˜ë¡œ `new` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì§€ ëª»í•˜ë„ë¡ ë§‰ì•„ì•¼ í•œë‹¤.
```java
// static ì˜ì—­ì— ê°ì²´ë¥¼ ë”± 1ê°œë§Œ ìƒì„±
private static final SingletoneService instance = new SingletoneService();

// publicìœ¼ë¡œ ì—´ì–´ì„œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ê°€ í•„ìš”í•˜ë©´ ì´ static ë©”ì„œë“œë¥¼ í†µí•´ì„œë§Œ ì¡°íšŒí•˜ë„ë¡ í•¨
public static SingletoneService getInstance() {
    return instance;
}

// ìƒì„±ìë¥¼ privateë¡œ ë§Œë“¤ì–´ ì™¸ë¶€ì—ì„œ new í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•œ ê°ì²´ ìƒì„±ì„ ëª»í•˜ê²Œ ë§‰ìŒ
private SingletoneService() {
}
```
- ì‹±ê¸€í†¤ íŒ¨í„´ì˜ ë¬¸ì œì 
  - ì½”ë“œ ìì²´ê°€ ë§ì´ ë“¤ì–´ê° 
  - í´ë¼ì´ì–¸íŠ¸ê°€ êµ¬ì²´ í´ë˜ìŠ¤ì— ì˜ì¡´í•œë‹¤ -> DIPìœ„ë°˜
  - private ìƒì„±ìë¡œ ìì‹ í´ë˜ìŠ¤ ë§Œë“¤ê¸° ì–´ë ¤ì›€
  - ê²°ë¡ ì ìœ¼ë¡œ ìœ ì—°ì„±ì´ ë–¨ì–´ì§„ë‹¤

### ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ
- ì‹±ê¸€í†¤ íŒ¨í„´ì˜ ë¬¸ì œì ì„ í•´ê²°í•˜ë©´ì„œ, ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹±ê¸€í†¤ìœ¼ë¡œ ê´€ë¦¬
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ë¹ˆ ê°ì²´ë¥¼ ë¯¸ë¦¬ ìƒì„±í•´ë†“ê³  ê´€ë¦¬í•¨

### ì‹±ê¸€í†¤ ë°©ì‹ì˜ ì£¼ì˜ì 
- ì—¬ëŸ¬ í´ë¼ì´ì–¸íŠ¸ê°€ í•˜ë‚˜ì˜ ê°™ì€ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê³µìœ í•˜ê¸° ë•Œë¬¸ì— ìƒíƒœë¥¼ ìœ ì§€(stateful)í•˜ê²Œ ì„¤ê³„í•˜ë©´ ì•ˆë¨
- ê°€ê¸‰ì  ì½ê¸°ë§Œ ê°€ëŠ¥í•´ì•¼í•¨
- ìŠ¤í”„ë§ë¹ˆì€ í•­ìƒ ë¬´ìƒíƒœë¡œ ì„¤ê³„ë˜ì–´ì•¼ í•¨
  - í•„ë“œ ëŒ€ì‹  ìë°”ì—ì„œ ê³µìœ ë˜ì§€ ì•ŠëŠ” ì§€ì—­ë³€ìˆ˜, íŒŒë¼ë¯¸í„°, ThreadLocal ë“±ì„ ì‚¬ìš©
```java
// ê¸°ì¡´
public class StatefulService {

    private int price; // ìƒíƒœë¥¼ ìœ ì§€í•˜ëŠ” í•„ë“œ

    public void order(String name, int price) {
        this.price = price; // ì—¬ê¸°ê°€ ë¬¸ì œ!
    }
    
    public int getPrice() {
        return price;
    }
```
```java
// ë³€ê²½
public class StatefulService {
    public int order(String name, int price) {
        return price;
    }
```

### `@Configuration`
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ë¹ˆì„ ë“±ë¡í•˜ê³  ê´€ë¦¬
- Configuration <- AppConfig@CGLIB
- ë¹ˆì´ ë“±ë¡ë˜ì–´ ìˆìœ¼ë©´ ë“±ë¡ëœ ë¹ˆ ë°˜í™˜, ì•„ë‹ˆë©´ ìƒˆë¡œìš´ ë¹ˆ ë“±ë¡í•˜ê³  ë°˜í™˜
- ì¸ìŠ¤í„´ìŠ¤ 1ê°œë§Œ ë§Œë“¤ê³  ê³µìœ í•´ì„œ ì‚¬ìš©í•˜ë¯€ë¡œ ì‹±ê¸€í†¤ ë³´ì¥
```text
AppConfig í˜¸ì¶œ ì‹œ `MemoryMemberRepository` ì„¸ë²ˆ í˜¸ì¶œ í•  ê²ƒ ê°™ì§€ë§Œ
@Bean MemberService -> new MemoryMemberRepository();
@Bean MemberRepository -> new MemoryMemberRepository();
@Bean OrderService -> new MemoryMemberRepository();

ì‹¤ì œë¡œëŠ” í•œë²ˆë§Œ í˜¸ì¶œí•˜ê³  ë“±ë¡ ëœ ë¹ˆ ê°€ì ¸ë‹¤ ì”€!
call AppConfig.memberService
call AppConfig.memberRepository
call AppConfig.orderService

memberService -> memberRepository1 = study.core.member.MemoryMemberRepository@7fcf2fc1
orderService -> memberRepository2 = study.core.member.MemoryMemberRepository@7fcf2fc1
memberRepository = study.core.member.MemoryMemberRepository@7fcf2fc1
```

## ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”
### ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì…
- `@ComponentScan`ì€ `@component`ê°€ ë¶™ì€ ëª¨ë“  í´ë˜ìŠ¤ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ìë™ ë“±ë¡ í•¨
  - ìŠ¤í”„ë§ ë¹ˆì˜ ê¸°ë³¸ ì´ë¦„ì€ í´ë˜ìŠ¤ëª…ì„ ì‚¬ìš©í•˜ë˜ ë§¨ ì•ê¸€ìë§Œ ì†Œë¬¸ìë¥¼ ì‚¬ìš©
  - ê¸°ì¡´ì— `@Bean`ìœ¼ë¡œ ë“±ë¡í–ˆë˜ ê²ƒì„ í•´ë‹¹ í´ë˜ìŠ¤ì—ì„œ `@component`ë“±ë¡í•´ì¤Œ
- ê¸°ì¡´ì— `AppConfig`ì—ì„œ ì˜ì¡´ê´€ê³„ ì£¼ì…í•´ ì£¼ì—ˆë˜ ê²ƒì„ í•´ë‹¹ í´ë˜ìŠ¤ì—ì„œ `@Autowired`ë¡œ ìë™ ë“±ë¡í•´ì¤Œ
- `@ComponentScan` ëŒ€ìƒ
  - `@Component` : ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì—ì„œ ì‚¬ìš©
  - `@Controlller` : ìŠ¤í”„ë§ MVC ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì‚¬ìš©
  - `@Service` : ìŠ¤í”„ë§ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ì„œ ì‚¬ìš©, ë¹„ì¦ˆë‹ˆìŠ¤ ê³„ì¸¡ ì¸ì‹ì— ë„ì›€ (íŠ¹ë³„í•œ ì²˜ë¦¬ëŠ” í•˜ì§€ ì•ŠìŒ)
  - `@Repository` : ìŠ¤í”„ë§ ë°ì´í„° ì ‘ê·¼ ê³„ì¸µì—ì„œ ì‚¬ìš©, **ë°ì´í„° ê³„ì¸µì˜ ì˜ˆì™¸ë¥¼ ìŠ¤í”„ë§ ì˜ˆì™¸ë¡œ ë³€í™˜**
  - `@Configuration` : ìŠ¤í”„ë§ ì„¤ì • ì •ë³´ì—ì„œ ì‚¬ìš©, ìŠ¤í”„ë§ ë¹ˆì´ ì‹±ê¸€í†¤ì„ ìœ ì§€í•˜ë„ë¡ ì¶”ê°€ ì²˜ë¦¬

### ì˜ì¡´ê´€ê³„ ì£¼ì…
- **ğŸ’œ ìƒì„±ì ì£¼ì… ğŸ’œ**
  - ìƒì„±ì í˜¸ì¶œ ì‹œì ì— ë”± 1ë²ˆë§Œ í˜¸ì¶œë˜ëŠ” ê²ƒì´ ë³´ì¥ëœë‹¤.
  - `ë¶ˆë³€, í•„ìˆ˜` ì˜ì¡´ê´€ê³„ì— ì‚¬ìš©
  - ìƒì„±ìê°€ 1ê°œë§Œ ìˆìœ¼ë©´ `@Autowired` ìƒëµ ê°€ëŠ¥ (ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìë™ìœ¼ë¡œ ë“±ë¡ë¨)
  - í•„ë“œì— `final` í‚¤ì›Œë“œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ 
    - ìƒì„±ìì—ì„œ í˜¹ì‹œë¼ë„ ê°’ì´ ì„¤ì •ë˜ì§€ ì•ŠëŠ” ì˜¤ë¥˜ë¥¼ ì»´íŒŒì¼ ë‹¨ê³„ì—ì„œ ì¡ì„ ìˆ˜ ìˆìŒ!
  - ìµœê·¼ì—ëŠ” `lombok`ì˜ `@RequiredArgsConstructor`ë¥¼ ì´ìš©í•˜ì—¬ ê°„ê²°í•˜ê²Œ ë§Œë“¦
    - `@RequiredArgsConstructor` : finalì´ ë¶™ì€ í•„ë“œë¡œ ìƒì„±ìë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì¤Œ
- ìˆ˜ì •ì ì£¼ì…(Setter ì£¼ì…)
  - `ì„ íƒ, ë³€ê²½` ê°€ëŠ¥ì„± ìˆëŠ” ì˜ì¡´ê´€ê³„ì— ì‚¬ìš©
- ~~í•„ë“œ ì£¼ì…~~
  - ì™¸ë¶€ì—ì„œ ë³€ê²½ì´ ë¶ˆê°€ëŠ¥
  - ìˆ˜ì •í•˜ë ¤ë©´ ê²°êµ­ setterê°€ í•„ìš”í•¨
  - ì‚¬ìš©í•˜ì§€ ë§ì! (í…ŒìŠ¤íŠ¸ì—ì„œë‚˜ ì‚¬ìš©í•˜ì)

### ì¡°íšŒ ë¹ˆì´ 2ê°œ ì´ìƒì¼ ë•Œ
- `DiscountPolicy` ì˜ í•˜ìœ„ íƒ€ì…ì¸ `FixDiscountPolicy`, `RateDiscountPolicy` ë‘˜ë‹¤ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ì„ ì–¸í•˜ë©´
- `UnsatisfiedDependencyException` ì˜¤ë¥˜ ë°œìƒ
- ì´ë•Œ í•˜ìœ„ íƒ€ì…ìœ¼ë¡œ ì§€ì •í•˜ë©´ ì˜¤ë¥˜ëŠ” í•´ê²°í•  ìˆ˜ ìˆì§€ë§Œ DIPë¥¼ ìœ„ë°°í•˜ê³  ìœ ì—°ì„±ì´ ë–¨ì–´ì§
- í•´ê²°1: `@Autowired í•„ë“œ ëª… ë§¤ì¹­`
  - autowiredëŠ” ê¸°ë³¸ì ìœ¼ë¡œ íƒ€ì…ìœ¼ë¡œ ë§¤ì¹­í•¨.
  - ì—¬ëŸ¬ ë¹ˆì´ ìˆìœ¼ë©´ í•„ë“œ ì´ë¦„, íŒŒë¼ë¯¸í„° ì´ë¦„ìœ¼ë¡œ ë¹ˆì„ ì¶”ê°€ ë§¤ì¹­
- í•´ê²°2: `@Qualifier`
  - ì¶”ê°€êµ¬ë¶„ì
  - `@Qualifier("ì´ë¦„")` ì˜ ì´ë¦„ ë¼ë¦¬ ë§¤ì¹­
- í•´ê²°3: `@Primary`
  - ìš°ì„ ìˆœìœ„ë¥¼ ì§€ì •
  - ì—¬ëŸ¬ê°œì˜ ë¹ˆì´ ìˆìœ¼ë©´ `@Primary`ê°€ ë¶™ì€ ë¹ˆì„ ë§¤ì¹­í•¨

## ë¹ˆ ìƒëª…ì£¼ê¸°
- ê°ì²´ ìƒì„± -> ì˜ì¡´ ê´€ê³„ ì£¼ì…
  - ì˜ˆì™¸ : ìƒì„±ìì£¼ì…ì€ ê°ì²´ ìƒì„±ê³¼ ì˜ì¡´ ê´€ê³„ ì£¼ì…ì´ ë™ì‹œì— ì¼ì–´ë‚¨
- ì´ë²¤íŠ¸ ë¼ì´í”„ ì‚¬ì´í´ (ì‹±ê¸€í†¤)
  - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± -> ìŠ¤í”„ë§ ë¹ˆ ìƒì„± -> ì˜ì¡´ê´€ê³„ ì£¼ì… -> ì´ˆê¸°í™” ì½œë°± -> ì‚¬ìš© -> ì†Œë©¸ì „ ì½œë°± -> ìŠ¤í”„ë§ ì¢…ë£Œ
- ê°ì²´ì˜ ìƒì„±ê³¼ ì´ˆê¸°í™”ë¥¼ ë¶„ë¦¬í•˜ì!

### ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±
- ~~ì¸í„°í˜ì´ìŠ¤(InitializingBean, DisposableBean)~~
  - í˜„ì¬ëŠ” ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë°©ë²•
- ì„¤ì • ì •ë³´ì— ì´ˆê¸°í™” ë©”ì„œë“œ, ì¢…ë£Œ ë©”ì„œë“œ ì§€ì •
  - `@Bean(initMethod = "init", destroyMethod = "close")`
  - ë©”ì„œë“œ ì´ë¦„ì„ ììœ ë¡­ê²Œ ì¤„ ìˆ˜ ìˆë‹¤.
  - ìŠ¤í”„ë§ ë¹ˆì´ ìŠ¤í”„ë§ ì½”ë“œì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ
  - ì½”ë“œê°€ ì•„ë‹ˆë¼ ì„¤ì • ì •ë³´ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì—, ì½”ë“œë¥¼ ê³ ì¹  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ë„ ì´ˆê¸°í™”, ì¢…ë£Œ ë©”ì„œë“œë¥¼ ì ìš©í•  ìˆ˜ ìˆìŒ
- **`@PostConstruct`, `@PreDestroy` ì–´ë…¸í…Œì´ì…˜ ì§€ì›**
  - ìë°”í‘œì¤€ `JSR-250`
  - ìŠ¤í”„ë§ì´ ì•„ë‹Œ ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆì—ì„œë„ ë™ì‘
  - ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ ì–´ìš¸ë¦¼
  - ë‹¨ì  : ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ëŠ” ì ìš©í•˜ì§€ ëª»í•¨ (ì™¸ë¶€ë¼ì´ë¸ŒëŸ¬ë¦¬ ì´ˆê¸°í™”, ì¢…ë£Œ í• ë•ŒëŠ” @Bean ê¸°ëŠ¥ ì‚¬ìš©í•˜ì)

## ë¹ˆ ìŠ¤ì½”í”„
- ì‹±ê¸€í†¤: ê¸°ë³¸ ìŠ¤ì½”í”„, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ì‹œì‘ê³¼ ì¢…ë£Œê¹Œì§€ ìœ ì§€ë˜ëŠ” ê°€ì¥ ë„“ì€ ë²”ìœ„ì˜ ìŠ¤ì½”í”„
- í”„ë¡œí† íƒ€ì…: ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” `í”„ë¡œí† íƒ€ì… ë¹ˆì˜ ìƒì„±ê³¼ ì˜ì¡´ê´€ê³„ ì£¼ì…ê¹Œì§€ë§Œ ê´€ì—¬`í•˜ê³  ë”ëŠ” ê´€ë¦¬í•˜ì§€ ì•ŠëŠ” ë§¤ìš° ì§§ì€ ë²”ìœ„ì˜ ìŠ¤ì½”í”„
- ì›¹ ê´€ë ¨ ìŠ¤ì½”í”„ : ì›¹í™˜ê²½ì—ì„œë§Œ ë™ì‘. ìŠ¤í”„ë§ì´ ì¢…ë£Œì‹œì ê¹Œì§€ ê´€ë¦¬
  - request: ì›¹ ìš”ì²­ì´ ë“¤ì–´ì˜¤ê³  ë‚˜ê°ˆë•Œ ê¹Œì§€ ìœ ì§€ë˜ëŠ” ìŠ¤ì½”í”„, `ê° HTTP ìš”ì²­ë§ˆë‹¤` ë³„ë„ì˜ ë¹ˆ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ê³  ê´€ë¦¬ ë¨
  - session: ì›¹ ì„¸ì…˜ì´ ìƒì„±ë˜ê³  ì¢…ë£Œë  ë•Œ ê¹Œì§€ ìœ ì§€ë˜ëŠ” ìŠ¤ì½”í”„
  - application: ì›¹ì˜ ì„œë¸”ë¦¿ ì»¨í…ìŠ¤íŠ¸ì™€ ê°™ì€ ë²”ìœ„ë¡œ ìœ ì§€ë˜ëŠ” ìŠ¤ì½”í”„
  - websocket : ì›¹ì†Œì¼“ê³¼ ë™ì¼í•œ ìƒëª…ì£¼ê¸°ë¥¼ ê°€ì§€ëŠ” ìŠ¤ì½”í”„
- ì‹±ê¸€í†¤ì—ì„œ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì‚¬ìš©í•˜ë©´ ì‹±ê¸€í†¤ ë¹ˆ ìƒì„± ì‹œì ì— í”„ë¡œí† íƒ€ì…ì´ ì£¼ì…ë°›ê¸°ë•Œë¬¸ì— ì‹±ê¸€í†¤ ë¹ˆê³¼ í•¨ê»˜ ê³„ì† ìœ ì§€
- í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì‚¬ìš©í•  ë•Œ ë§ˆë‹¤ ìƒˆë¡œ ìƒì„±í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì›í•  ê²½ìš°
  - í•´ê²° 1: `ObjectProvider` ì‚¬ìš©
    - `getObject()` ë©”ì„œë“œ ì‚¬ìš© 
    - ìŠ¤í”„ë§ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ì„œ í•´ë‹¹ ë¹ˆì„ ì°¾ì•„ì„œ ë°˜í™˜ : `DL(Dependency Lookup)`
  - í•´ê²° 2: JSR-330 `Provider` ì‚¬ìš©
    - ìŠ¤í”„ë§ë¶€íŠ¸ 2.xx : `javax.inject:javax.inject:1` gradleì— ì¶”ê°€
    - ìŠ¤í”„ë§ë¶€íŠ¸ 3.xx : `jakarta.inject:jakarta.inject-api:2.0.1` gradleì— ì¶”ê°€
    - `get()` ë©”ì„œë“œ ì‚¬ìš©
    - ìë°” í‘œì¤€ì´ë¯€ë¡œ ìŠ¤í”„ë§ì´ ì•„ë‹Œ ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ

### Request ìŠ¤ì½”í”„ ê°œë°œ
- ê¸°ëŒ€í•˜ëŠ” ê³µí†µ í¬ë©§: [UUID][requestURL] {message}
- `@Scope(value = "request")` : HTTP ìš”ì²­ ë‹¹ í•˜ë‚˜ì”© ìƒì„±
- uuidë¥¼ ì €ì¥í•´ë‘ë©´ ë‹¤ë¥¸ HTTP ìš”ì²­ê³¼ êµ¬ë¶„í•  ìˆ˜ ìˆìŒ
- requestURLì€ ë¹ˆì´ ìƒì„±ë˜ëŠ” ì‹œì ì—ëŠ” ì•Œìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì™¸ë¶€ì—ì„œ setterë¡œ ì…ë ¥
- ìŠ¤í”„ë§ application ì‹¤í–‰ì‹œí‚¤ëŠ” ì‹œì ì—ëŠ” requestê°€ ì—†ìœ¼ë¯€ë¡œ requestìŠ¤ì½”í”„ê°€ í™œì„±í™”ë˜ì§€ ì•Šì•„ì„œ ë¹ˆ ìƒì„± ì˜¤ë¥˜ ë°œìƒ
> Scope 'request' is not active for the current thread; consider defining a scoped proxy for this bean if you intend to refer to it from a singleton; ...
- í•´ê²° 1 : `ObjectProvider` ì‚¬ìš©í•´ì„œ í•„ìš”ì‹œì ì— request scope ë¹ˆ ìƒì„±
  - ObjectProvider.getObject() ë¥¼ ê°ê° í˜¸ì¶œí•´ë„ ê°™ì€ HTTP ìš”ì²­ì´ë©´ ê°™ì€ ìŠ¤í”„ë§ ë¹ˆì´ ë°˜í™˜ ë¨!
```text
[57504e97-fb2b-4ca6-a14f-4949b22441a6] request scope bean create: study.core.common.MyLogger@76344ca3
[57504e97-fb2b-4ca6-a14f-4949b22441a6][http://localhost:8080/log-demo] controller test
[57504e97-fb2b-4ca6-a14f-4949b22441a6][http://localhost:8080/log-demo] service id = testId
[57504e97-fb2b-4ca6-a14f-4949b22441a6] request scope bean close: study.core.common.MyLogger@76344ca3
```
- í•´ê²° 2 : `@Scope(value = "request", proxyMode = ScopedProxyMode.TARGET_CLASS)`
  - ìŠ¤í”„ë§ì»¨í…Œì´ë„ˆê°€ CGLIB ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©í•´ì„œ ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ ìƒì„±
